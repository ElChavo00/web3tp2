<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Destroy Earth</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Courier New', Courier, monospace; /* Police plus "Hacker" */
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Important pour la 3D */
            margin: 0;
        }

        .container-fluid {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 0;
        }

        /* --- GRILLE ET BORDURES --- */
        .grid-row {
            border-bottom: 1px solid #fff;
            flex-grow: 1;
        }
        .grid-row:last-child {
            border-bottom: none;
        }
        .grid-col {
            border-right: 1px solid #fff;
            padding: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative; /* Pour positionner les éléments internes */
        }
        .grid-col:last-child {
            border-right: none;
        }

        /* --- HAUTEURS DES LIGNES --- */
        .row-top { height: 10%; min-height: 60px; }
        .row-middle { height: 60%; }
        .row-bottom { height: 30%; min-height: 150px; }

        /* --- COLONNES EMPILÉES (GAUCHE ET DROITE) --- */
        .stacked-col {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 0;
            border-right: 1px solid #fff;
        }
        .stacked-cell {
            flex: 1;
            border-bottom: 1px solid #fff;
            padding: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        .stacked-cell:last-child {
            border-bottom: none;
        }

        /* --- CONTENEURS SPÉCIFIQUES --- */
        .chart-container {
            width: 90%;
            height: 80%;
            position: relative;
        }

        /* LE CONTENEUR 3D (Important pour qu'il ne s'écrase pas) */
        #earth-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        /* Placeholder pour la map (si tu veux remettre MapLibre plus tard) */
        #map-placeholder {
            width: 100%; 
            height: 100%; 
            background: #111; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            color: #555;
        }

        /* --- STYLE TEXTE & BOUTONS --- */
        h6 {
            margin-bottom: 10px;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.8rem;
            z-index: 2; /* Pour être au dessus de la 3D si besoin */
            letter-spacing: 2px;
        }

        h4 {
            letter-spacing: 5px;
            font-weight: bold;
        }

        .red-button {
            background-color: #d9534f;
            color: white;
            border: 1px solid red;
            padding: 10px 30px;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s;
        }
        .red-button:hover {
            background-color: red;
            box-shadow: 0 0 15px red;
        }
    </style>
</head>
<body>

<div class="container-fluid">
    <div class="row grid-row row-top g-0">
        <div class="col-3 grid-col">
            <h6>FANCY</h6>
        </div>
        <div class="col-6 grid-col">
            <h4>DESTROY EARTH</h4>
        </div>
        <div class="col-3 grid-col">
            <h6>FANCY</h6>
        </div>
    </div>

    <div class="row grid-row row-middle g-0">
        
        <div class="col-3 stacked-col">
            <div class="stacked-cell">
                <h6>POPULATION + DIAGRAMME</h6>
                <div class="chart-container">
                    <canvas id="populationChart"></canvas>
                </div>
            </div>
            <div class="stacked-cell">
                <h6>METEO + DIAGRAMME</h6>
                <div class="chart-container">
                    <canvas id="meteoChart"></canvas>
                </div>
            </div>
        </div>

        <div class="col-6 grid-col p-0">
            <div id="earth-container"></div>
        </div>

        <div class="col-3 stacked-col" style="border-right: none;">
            <div class="stacked-cell" style="padding:0;">
                <h6 style="position: absolute; top: 10px; width: 100%; text-align: center; pointer-events: none;">MAP + RANDOMISER</h6>
                <div id="map-placeholder">
                    <i class="bi bi-globe" style="font-size: 2rem;"></i>
                </div>
            </div>
            <div class="stacked-cell">
                <h6>MORT + DIAGRAMME</h6>
                <div class="chart-container">
                    <canvas id="mortChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="row grid-row row-bottom g-0">
        <div class="col-3 grid-col">
            <h6>POLLUTION + DIAGRAMME</h6>
            <div class="chart-container">
                <canvas id="pollutionChart"></canvas>
            </div>
        </div>
        
        <div class="col-6 p-0 d-flex" style="border-right: 1px solid #fff;">
            <div class="col-4 grid-col">
                <h6>MAGIC BALL</h6>
                <div style="width: 30px; height: 30px; border: 2px solid white; border-radius: 50%;"></div>
            </div>
            <div class="col-4 grid-col">
                <h6>BOUTON</h6>
                <button class="red-button">ACTIVER</button>
            </div>
            <div class="col-4 grid-col" style="border-right: none;">
                <h6>FUN FACT</h6>
                <p style="font-size: 0.6rem; max-width: 80%;">La Terre tourne à 1670 km/h.</p>
            </div>
        </div>
        
        <div class="col-3 grid-col">
            <h6>LANGUES</h6>
            <div class="btn-group btn-group-sm">
                <button class="btn btn-outline-light active">FR</button>
                <button class="btn btn-outline-light">EN</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

<script>
    /* --------------------------------------------------------
       1. THREE.JS - LA TERRE 3D
       -------------------------------------------------------- */
    const container = document.getElementById('earth-container');

    if (container) {
        // Scène
        const scene = new THREE.Scene();
        
        // Caméra
        const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
        camera.position.z = 4.5; // Distance de la caméra

        // Rendu
        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        container.appendChild(renderer.domElement);

        // Sphère
        const geometry = new THREE.SphereGeometry(1.5, 64, 64);
        
        // Texture
        const textureLoader = new THREE.TextureLoader();
        const earthTexture = textureLoader.load('https://upload.wikimedia.org/wikipedia/commons/c/c3/Solarsystemscope_texture_2k_earth_daymap.jpg');
        
        const material = new THREE.MeshPhongMaterial({ 
            map: earthTexture,
            shininess: 10
        });

        const earth = new THREE.Mesh(geometry, material);
        scene.add(earth);

        // Lumières
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2); 
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 1.5);
        pointLight.position.set(10, 5, 10);
        scene.add(pointLight);

        // Animation Loop
        function animate() {
            requestAnimationFrame(animate);
            earth.rotation.y += 0.002; // Rotation continue
            renderer.render(scene, camera);
        }
        animate();

        // Gestion du redimensionnement (Important pour la grille)
        window.addEventListener('resize', () => {
            const width = container.clientWidth;
            const height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        });
        
        // Petit hack pour forcer le redimensionnement au chargement initial
        setTimeout(() => {
            const width = container.clientWidth;
            const height = container.clientHeight;
            renderer.setSize(width, height);
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
        }, 100);
    }

    /* --------------------------------------------------------
       2. CHART.JS - LES DIAGRAMMES
       -------------------------------------------------------- */
    
    // Fonction générique pour créer les charts style "Dashboard"
    function createChart(canvasId, label, color, dataPoints) {
        const ctx = document.getElementById(canvasId).getContext('2d');
        new Chart(ctx, {
            type: 'line', // Ou 'scatter' selon tes préférences
            data: {
                labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
                datasets: [{
                    label: label,
                    data: dataPoints,
                    borderColor: color,
                    backgroundColor: color,
                    borderWidth: 2,
                    pointRadius: 3,
                    tension: 0.4 // Courbe lisse
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } }, // On cache la légende pour le style épuré
                scales: {
                    x: { display: false }, // On cache les axes pour le style "grille noire"
                    y: { 
                        display: true, 
                        grid: { color: '#333' }, // Grille très discrète
                        ticks: { color: '#555', font: { size: 10 } }
                    }
                }
            }
        });
    }

    // Données aléatoires pour l'exemple
    createChart('populationChart', 'Pop', '#00ff00', [10, 20, 15, 30, 45, 40, 60, 55, 70, 80]);
    createChart('meteoChart', 'Temp', '#00ffff', [15, 18, 20, 22, 25, 30, 35, 32, 28, 26]);
    createChart('mortChart', 'Morts', '#ff0000', [5, 8, 12, 10, 15, 25, 40, 35, 50, 60]);
    createChart('pollutionChart', 'CO2', '#888888', [400, 410, 415, 420, 430, 440, 450, 460, 470, 480]);

</script>

</body>
</html>